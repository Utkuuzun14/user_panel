<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDG - Advanced Settings</title>
    
    <!-- CSS Libraries -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <link rel="stylesheet" href="/static/styles.css?v=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" />
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAYCAYAAAAGXva8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALDSURBVEhLrZa7axRBHMd3LxqNRCwkwQe+MODtXkTEQoNWNhaCaGfjqzO9hVhYmEJI4d9go0TFByIiKmKjCDa+chdROEkhany/UGM8P9+d2c3dZvd2inzhw/xmb2Z+O7/5zW/Pr4TBLs/zjsMGkKagAc/g5Gi1dkkPZ1MdvT0952k3Qskyx7IMlvL7hYmJ95PYsybt9CvtQtOdoddQZrffTNfzGK8X2wYHYDUsgJ8wxLi7tIXSAnONmSmitUKFu1jzYC4dgO2yx7Qlwkpy20w9IO1XoFRk/6k1ruW0LJadKnDwpCunF1U8/k0qVcrnD2m0lpy+Mmak1sMqYifogMGaLur2Sv9LabaVE2kF7FHRlOuEXKDEWg5LkEdyAKiijd8JW+ADPQXPWQRfchHPwCnQsU42GV6/Wam+xE2WFKVIlLBNafxDzFKTDdhUGyVZltzJaO7wG69VP6TcMwTDjo6uXm0ij1TEN0OJKprTG4J0xNbY2TnPW9GZI2a4CtCLqIZfszZIWSs9VBcuTjmm+MYud6nzTV0bSOabn5h4ViqtcpLZObSU6AwpnHV7CbbjCb3qhZqk65UlH9c+YxTuVjsCeJvaBHKe12bZZ+gJJKW0XkhaRoUqEJaCzUUGJUX8tDEMvqJbHlUzrq9U1OhZHx8lpGJQ7fd9Xdg6Akih2qJCpr7Koa6UxI/AJ4nD+gToOtdtITk7Z5Saa66Cd5OkpDLB4XsYncnW6m+Y0LIoeZOs+DlWpEjFPGasX1sdAO9duH7okktQNRcW85RNZCQJt6CDoG3sRLsMduOfqVA6LoqICMC0/mqOPQ1IUrPpcneYViWZlrZX1oiVXp8rA5HLn6LNtm5X132rS1akK+l9j5uqJbWPpSj2AN/Dd8hFuOWVvGAZdDNTnaT8ogzUvTixFQd/cw2Tv4+iJFdmr+9sPOm/NYefe+H+IM6vdCn68xAAAAABJRU5ErkJggg==" type="image/x-icon">
</head>

<body>
    <!-- Sidebar Toggle Button -->
    <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
        <i class="fas fa-bars"></i>
    </a>
    
    <!-- Main Wrapper -->
    <div class="page wrapper chiller-theme toggled">
        <!-- Sidebar -->
        {% include 'sidebar.html' %}
        
        <!-- Main Content -->
        <main class="page-content">
            <div class="container-fluid">
                <h2>Advanced Settings</h2>
                <hr>
                
                <div id="form-response"></div>
                
                <div class="alert alert-warning">
                    <h4><b>Warning: Do not use if you are not authorized person.</b></h4>
                </div>
                
                <div class="button-wrapper">
                    <!-- Reboot Button -->
                    <button id="rebootButton" type="button" class="btn btn-danger" style="width: 200px;">
                        <i class="fas fa-power-off" style="float: left; padding-top: 5px;"></i>
                        <b> Reboot Device</b>
                    </button>
                    
                    <br><br>
                    
                    <!-- Download Button -->
                    <a href="/uploads/metadata.xml" target="_blank" class="btn btn-success" style="width: 200px;">
                        <i class="fas fa-download" style="float: left; padding-top: 5px;"></i>
                        <b> Download Metadata</b>
                    </a>
                </div>               
            </div>
        </main>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    
    <!-- Sidebar JavaScript -->
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Sidebar Elements
        const wrapper = document.querySelector(".page.wrapper");
        const showSidebarBtn = document.getElementById("show-sidebar");
        const closeSidebarBtn = document.getElementById("close-sidebar");

        // Responsive Sidebar Handling
        function updateSidebarOnResize() {
            if (!wrapper) return;
            
            if (window.innerWidth <= 768) {
                wrapper.classList.add("toggled");
            } else {
                wrapper.classList.remove("toggled");
            }
            updateShowSidebarButton();
        }

        // Toggle Button Visibility
        function updateShowSidebarButton() {
            if (!wrapper || !showSidebarBtn) return;
            
            if (wrapper.classList.contains("toggled")) {
                showSidebarBtn.style.display = "block";
            } else {
                showSidebarBtn.style.display = "none";
            }
        }

        // Initialize Sidebar
        updateSidebarOnResize();
        window.addEventListener("resize", updateSidebarOnResize);

        // Sidebar Toggle Events
        if (showSidebarBtn && wrapper) {
            showSidebarBtn.addEventListener("click", function (e) {
                e.preventDefault();
                wrapper.classList.remove("toggled");
                updateShowSidebarButton();
            });
        }

        if (closeSidebarBtn && wrapper) {
            closeSidebarBtn.addEventListener("click", function (e) {
                e.preventDefault();
                wrapper.classList.add("toggled");
                updateShowSidebarButton();
            });
        }

        // Dropdown Menu Handling
        document.querySelectorAll('.sidebar-dropdown > a').forEach(menu => {
            menu.addEventListener('click', function (e) {
                const parent = this.parentElement;
                const submenu = parent.querySelector('.sidebar-submenu');
                
                if (!submenu || this.getAttribute('href') !== '#') return;

                e.preventDefault();
                const isActive = parent.classList.contains('active');

                // Close all other dropdowns
                document.querySelectorAll('.sidebar-dropdown').forEach(item => {
                    item.classList.remove('active');
                    const sm = item.querySelector('.sidebar-submenu');
                    if (sm) sm.style.display = 'none';
                });

                // Toggle current dropdown
                if (!isActive) {
                    parent.classList.add('active');
                    submenu.style.display = 'block';
                }
            });
        });
    });
    </script>
</body>
</html>